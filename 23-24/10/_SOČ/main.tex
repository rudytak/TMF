% ŠABLONA PRO PSANÍ SOČ
%%%%%%%%%%%%%%%%%%%%%%%%%
% Autor: Jakub Dokulil (kubadokulil99@gmail.com)
% Tato šablona byla vytvořena tak, aby pomocí ní mohli v systému LaTeX soutěžící sázet své práce a zároveň odpovídala požadavkům na formátování vyplývajícím z wordové šablony umístěné na webu soc.cz.
%

% !TEX root = ./main.tex

\documentclass[12pt, a4paper,
  %oneside,      %% -- odkomentujte, pokud chcete svou práci mít pouze jednostrannou, mezera pro hřbet pak automaticky bude pouze na levé straně
 twoside,        %% -- pro oboustranné práce, mezera pro hřbet následně střídá strany.
 openright
]{report}

%% Nutné balíčky a nastavení
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Proměnné
\newcommand\city{Praha} %% vyplň oficiální název města
\newcommand\district{Hlavní město Praha} %% vyplň oficiální název kraje
\newcommand\specialization{Obor č. 2: Fyzika} %% -- napiš číslo a název tvého oboru
\newcommand\school{Gymnázium Christiana Dopplera} %% vyplň název školy
\newcommand\schoolAddress{Zborovská 621, 150 00 Malá Strana} %% vyplň název školy
\newcommand\consultant{RNDr. Pavel Josef, CSc.} %% vyplň jméno svého konzultanta
\newcommand\authorName{Ondřej Sedláček}  %% vyplň své jméno
\newcommand\publicationYear{2023} %% vyplň rok
\newcommand\mainTitle{Počítačové modelování dynamických magnetických systémů} %% vyplň název své práce
\newcommand\mainTitleEN{Computer modelling of dynamic magnetic systems} %% vyplň název své práce

\title{\mainTitle} %% -- Název tvé práce
\author{\authorName} %% -- tvé jméno
\date{\publicationYear} %% -- rok, kdy píšeš SOČku

\usepackage[top=2.5cm, bottom=2.5cm, left=3.5cm, right=1.5cm]{geometry} %% nastaví okraje, left -- vnitřní okraj, right -- vnější okraj

\usepackage[czech]{babel} %% balík babel pro sazbu v češtině
\usepackage[utf8]{inputenc} %% balíky pro kódování textu
\usepackage[T1]{fontenc}
\usepackage{cmap} %% balíček zajišťující, že vytvořené PDF bude prohledávatelné a kopírovatelné

\usepackage{graphicx} %% balík pro vkládání obrázků

\usepackage{subcaption} %% balíček pro vkládání podobrázků
\usepackage{wrapfig}
\usepackage{hyperref} %% balíček, který v PDF vytváří odkazy

\linespread{1.15} %% řádkování

\usepackage[pagestyles]{titlesec} %% balíček pro úpravu stylu kapitol a sekcí
\titleformat{\chapter}[block]{\scshape\bfseries\LARGE}{\thechapter}{10pt}{\vspace{0pt}}[\vspace{-22pt}]
\titleformat{\section}[block]{\scshape\bfseries\Large}{\thesection}{10pt}{\vspace{0pt}}
\titleformat{\subsection}[block]{\bfseries\large}{\thesubsection}{10pt}{\vspace{0pt}}

\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{4}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{chngcntr}

\pagestyle{fancy}
\renewcommand{\headrulewidth}{1pt}

\addto\captionsczech{\renewcommand{\figurename}{Obr.}}
\addto\captionsczech{\renewcommand{\tablename}{Tab.}}
\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}
\counterwithout{equation}{chapter}
\counterwithout{footnote}{chapter}

\setlength{\parskip}{12pt}%
\setlength{\parindent}{0pt}%

% \usepackage[]{nomencl}
% % makeindex main.nlo -s nomencl.ist -o main.nls
\usepackage{tabularx} % in the preamble

\usepackage{booktabs}
\usepackage{url}

%% Balíčky co se můžou hodit :) 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{pdfpages} %% Balíček umožňující vkládat stránky z PDF souborů, 

\usepackage{upgreek} %% Balíček pro sazbu stojatých řeckých písmen, třeba u jednotky mikrometr. Například stojaté mí: \upmu, stojaté pí: \uppi

\usepackage{amsmath}    %% Balíčky amsmath a amsfonts 
\usepackage{yhmath}    %% Balíčky amsmath a amsfonts 
\usepackage{amsfonts}   %% pro sazbu matematických symbolů
\usepackage{esint}     %% pro sazbu různých integrálů (např \oiint)
\usepackage{mathrsfs}
\usepackage{enumitem}

\usepackage{xcolor}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}
\lstset{numberbychapter=false}
\renewcommand{\lstlistingname}{Ústřižek kódu}
\renewcommand{\lstlistlistingname}{Seznam ústřižků}

%% makra pro sazbu matematiky
\newcommand{\dif}{\mathrm{d}} %% makro pro sazbu diferenciálu, místo toho
%% abych musel psát '\mathrm{d}' mi stačí napsat '\dif' což je mnohem 
%% kratší a mohu si tak usnadnit práci

%% Bordel pro práci - můžeš smáznout :) 
%%%%%%%%%%%%%%%%%%%

\usepackage{lipsum} %% balíček který píše lipsum (nesmyslný text, který se používá pro kontrolu typografie)

%% Začátek dokumentu
%%%%%%%%%%%%%%%%%%%%

\begin{document}
\pagestyle{empty}
\pagenumbering{Roman}
\graphicspath{{./imgsLR}}

% PŘEDNÍ STRANA
\begin{titlepage}
    \bfseries{ %%% písmo na stránce je tučně
        \begin{center}
            \LARGE{STŘEDOŠKOLSKÁ ODBORNÁ ČINNOST}

            \vspace{14pt}
            \large{ %%%%
                \specialization
            } %%%%

            \vspace{0.3 \textheight}

            \LARGE{ %%%%
                \mainTitle
            }%%%%

            \vspace{0.35 \textheight}
        \end{center}

        \noindent\Large{\authorName}

        \noindent\Large{\district \hspace{\stretch{1}}  \city, \publicationYear}


    } %%%
\end{titlepage}
\cleardoublepage

% ÚVODNÍ STRANA
% \begin{}
%% Úvodní stránka s informacemi
{\bfseries %%% písmo na stránce je tučně
    \begin{center}
        \LARGE{STŘEDOŠKOLSKÁ ODBORNÁ ČINNOST}

        \vspace{14pt}
        {\large %%%%
            \specialization %% -- napiš číslo a název tvého oboru
        } %%%%

        \vspace{0.20 \textheight}

        \LARGE{ %%%%
            \mainTitle
        }

        \LARGE{ %%%%
            \mainTitleEN
        }%%%%

        \vspace{0.25\textheight}
    \end{center}
}%%%
{\Large %%%
    \noindent\textbf{Jméno:} \authorName\\
    \textbf{Škola:} \school, \schoolAddress\\
    \textbf{Kraj:} \district\\
    \textbf{Konzultant:} \consultant\\
} %%%

\noindent \city, \publicationYear
% \end{}
\cleardoublepage

% PROHLÁŠENÍ
% \begin{}
\noindent{\Large{\bfseries{Prohlášení}}}

\noindent Prohlašuji, že jsem svou práci SOČ vypracoval samostatně a použil jsem pouze prameny a literaturu uvedené v seznamu bibliografických záznamů.

\noindent Prohlašuji, že tištěná verze a elektronická verze soutěžní práce SOČ jsou shodné.

\noindent Nemám závažný důvod proti zpřístupňování této práce v souladu se zákonem č. 121/2000 Sb., o právu autorském, o právech souvisejících s právem autorským a o změně některých zákonů (autorský zákon) ve znění pozdějších předpisů.

\vspace{24 pt}

\noindent V Praze dne 9. září 2023 \dotfill{}\hspace{\stretch{0.9}}

\hspace{6cm} \authorName
% \end{}
\cleardoublepage

% PODĚKOVÁNÍ TODO
% \begin{}
\vspace*{0.0\textheight}
% \vspace*{0.8\textheight}
\noindent{\Large{\bfseries{Poděkování}}}

\noindent
Chtěl bych poděkovat ...
% \end{}
\cleardoublepage

% ANOTACE TODO
% \begin{}
\noindent{\Large{\bfseries{Anotace}}}

\noindent Sem napíšeš svůj abstrakt. \lipsum[1] %% přepiš!!

\vspace{18pt}

% TODO - keywords
\noindent{\Large{\bfseries{Klíčová slova}}}

\noindent Šablona, \LaTeX, SOČ, \dots

\vspace{18pt}

% TODO - abstrakt EN
\noindent{\Large{\bfseries{Annotation}}}

\noindent Write your abstract here! \lipsum[1] %% přepiš!!

\vspace{18pt}

% TODO - keywords EN
\noindent{\Large{\bfseries{Keywords}}}

\noindent Template, \LaTeX, High school proffessional activity, \dots
% \end{}
\cleardoublepage

% TABLE OF CONTENTS
% \begin{}
\setlength{\parskip}{0pt}%
\tableofcontents
\setlength{\parskip}{12pt}%

\pagenumbering{arabic}
\pagestyle{fancy}
\setcounter{page}{1}
% \end{}

\chapter{Úvod}
\label{chap:introduction}
Motivací pro tuto práci byla úloha mezinárodní fyzikální soutěže zvané \textit{"International Young Physicists Tournament"}, neboli IYPT.
U nás je avšak tato soutěž známější pod zkratkou TMF vycházející z překladu původního názvu - \textit{"Turnaj mladých fyziků"}.
Soutěž se v České republice kéná pod záštitout Fakulty jaderné a fyzikálně inženýrské ČVUT, FZU AV ČR, MŠMT a JČMT a z podstaty soutěže je cílem úloh dovést středoškolské studenty k vědeckému sledování nejrůznějších jevů ze všech částí fyziky.

Úloha, kterou jsem se zabýval, je v pořadí desáta úloha letošního, tedy 37., ročníku. Zadání je následovné \cite{tmf_tasks}:

\textbf{10. Magnetický převod}

\textit{"Vezměte několik identických prstových točítek \footnote{Z překladu anglického "Fidget spinner"} a připevněte k jejich koncům neodymové magnety. Pokud umístíte točítka v rovině vedle sebe a točíte jedním z nich, ostatní se začnou otáčet jen vlivem magnetického pole. Prozkoumejte a vysvětlete tento jev."}

Zadání úlohy je, jak je pro TMF tradiční, velmi otevřené a je tedy na řešiteli, aby si vymezil přesnou oblast svého zkoumání.
Tato práce se bude zabívat:

\begin{enumerate}[topsep=0pt, partopsep=0pt]
    \setlength{\itemsep}{0pt}%
    \setlength{\parskip}{0pt}%
    \item Určením vlastností \textit{prstových točítek} (dále "fidget spinner" či pouze "spinner")
    \item Popisem třecích sil působících na spinner
    \item Vývojem simulace chování systémů více fidget spinnerů a porovnáním této simulace s realitou
    \item Přenosem úhlové rychlosti
    \item Přenosem momentu síly
    \item Možným využím získaných poznatků k vývoji efektivnějších magnetických převodů
\end{enumerate}

\clearpage

\section[Nomenklatura]{Nomenklatura}
\label{sec:nomenclature}
V tabulce \ref{tab:nomenclature} definujeme symboly, které budeme používat v průběhu celé práce, společně s jejich významem:

\begin{table}[!ht]
    \captionsetup{justification=raggedright,singlelinecheck=off}
    \caption{Nomenklatura}
    \label{tab:nomenclature}

    \centering{\textbf{Vlastnosti spinneru}} \\
    \begin{tabularx}{\textwidth}{m{0.1\textwidth} m{0.1\textwidth} p{0.4\textwidth} p{5cm} }
        \textbf{Symbol}  & \textbf{Jednotka}         & \textbf{Popis}                                                & \textbf{Poznámka}                              \\
        \hline
        $n$              &                           & Celkový počet ramen                                           & Ekvivaletní počtu magnetů                      \\
        $r$              & $m$                       & Poloměr spinneru                                              & Ekvivaletní vzdálenosti osy otáčení od magnetů \\
        $S$              & $(m,m,0)$                 & Střed spinneru v rovině                                       & (tzn. pozice osy otáčení)                      \\
        $P(i)$           & $(m,m,0)$                 & Pozice $i$. magnetu spinneru                                  & Funkce indexu magnetu                          \\
        $\varphi$        & $\text{rad}$              & Úhel rotace spinneru                                                                                           \\
        $\omega$         & $\text{rad} \cdot s^{-1}$ & Úhlová rychlost spinneru                                                                                       \\
        $I$              & $kg \cdot m^2$            & Moment setrvačnosti spinneru                                                                                   \\
        $\alpha$         & $\text{rad} \cdot s^{-2}$ & Koeficient rychlostně nezávislého brzdného úhlového zrychlení & viz \ref{chap:drag}                                     \\
        $\beta$          & $s^{-1}$                  & Koeficient lineárně závislého brzdného úhlového zrychlení     & viz \ref{chap:drag}                                     \\
        $\gamma$         & $\text{rad}^{-1}$         & Koeficient kvadraticky závislého brzdného úhlového zrychlení  & viz \ref{chap:drag}                                     \\
        $c_1$, $t_{max}$ & $s$                       & Celková délka otáčení spinneru                                & viz \ref{chap:drag}                                     \\
    \end{tabularx}

    \vspace{24pt}

    \centering{\textbf{Vlastnosti magnetu}} \\
    \begin{tabularx}{\textwidth}{m{0.15\textwidth} m{0.1\textwidth} p{0.45\textwidth} p{4cm} }
        \textbf{Symbol}                      & \textbf{Jednotka}                                                            & \textbf{Popis}                                                                              & \textbf{Poznámka}                      \\
        \hline
        $\vec{m}$                            & $A \cdot m^2$                                                                & Magnetický moment                                                                                                                    \\
        $\vec{B}_r$                          & $T$                                                                          & Remanentní magentizace                                                                      & (tzv. remanence)                       \\
        $V$                                  & $m^3$                                                                        & Objem magnetu                                                                                                                        \\
        $F_m(\vec{r}, \vec{m_1}, \vec{m_2})$ & $N$                                                                          & Silová interakce mezi magnetickými momenty $\vec{m_1}$ a $\vec{m_2}$ vzdálenými o $\vec{r}$ & \cite{magnetic_force}                  \\
        $B(\vec{r}, \vec{m})$                & $T$                                                                          & Magnetická indukce tvořená magnetickými momentem $\vec{m}$ ve vzdálenosti $\vec{r}$         & \cite{magnetic_force, magnetic_torque} \\
        $\tau_F, \tau_{mag}$                 & $Nm$
                                             & Momenty sil působící na spinner vycházející ze silové a magnetické interakce & \cite{magnetic_torque,torque_def}, viz \ref{}                                                                                        \\
    \end{tabularx}
\end{table}

Dále stojí za zmínku, že pro vyjádření chyby měření je v textu používána tzv. \textit{shorthand error notation} \cite{shorthand_error_notation} (pro naše účely zkráceno na SEN). Pro jasnost uvedeme příklad, kde zápis pomocí SEN vypadá takto: $11.5(12)$, a ekvivalentní přepis do standardní notace je: $11.5 \pm 1.2$. Tímto zjednodušíme zápis: $11.5 \pm 1.2 = 11.5(12)$ \cite{shorthand_error_notation_stack_exchange}.

\chapter{Úvodní sledování}
\begin{wrapfigure}{r}{0.4\textwidth}
    \includegraphics[width=0.3\textwidth]{osazeny_spinner.png}
    \centering
    \caption{Spinner osazeným neodymovými magnety}
    \label{fig:1spinner}
\end{wrapfigure}

Prvním krokem v řešení této úlohy bylo kvalitativní sledování jejich chování v co největším rozpětí konfigurací, abychom mohli určit relevantní parametry a odstranit nezajímavé konfigurace.

Hlavním poznatkem je změna chování systému dvou pinnerů v závislosti na jejich relativních rychlostech.
Máme-li na stole 2 spinnery, ze kterých je jeden nehybný, a druhý roztočíme na nízké otáčky, dojde po krátké chvíli k silné, ale chaotické, interakci (viz příloha \ref{attachment_1}).
Naopak, roztočíme-li druhý spinner znatelně rychleji, nedochází téměř k žádné interakci (viz příloha \ref{attachment_2}).
Druhý spinner se prvnímu spinneru efektivně jeví jako permanentí magnet - druhý magnet se tedy nanejvýše umístí do energeticky nejvýhodnější polohy a dále zůstává nehybný.

\begin{wrapfigure}{l}{0.45\textwidth}
    \includegraphics[width=0.35\textwidth]{3spinnery.png}
    \centering
    \caption{Tři interagující spinnery}
    \label{fig:3spinners}
\end{wrapfigure}
Dalším cenným poznatkem je, že při interakci více spinnerů se systém chová chaoticky téměř vždy (viz příloha \ref{attachment_3}).
Toto pro nás dělá měření interakcí více jak dvou spinnerů nepříznivé a k získání použitelných výsledků je důležité omezit naše bádání pouze na jeden či dva spinnery.
Poté, co kvalitně popíšeme menší počet spinnerů, se můžeme pomocí simulace pokusit o extrapolování našeho modelu na více spinnerů.

Z přesného zadání můžeme také vyčíst nějaké důležité předpoklady.
Jmenovitě se jedná o
umístění všech spinnerů v jedné \textit{"rovině vedle sebe"}, což z velké míry usnadní budoucí výpočty,
točením pouze \textit{"jedním z nich"} a
omezení interakcí mezi spinnery pouze na \textit{"vlivy magentického pole"}.
Neměli bychom opomenout ani skutečnost, že všechny spinnery mají být \textit{"identické"}.

\section{Určení parametrů}

Z úvodního sledování není těžké určit relevantní parametry a vybrat, které z nich je možné s naším vybavením měřit.

\subsection{Parametry týkající se konfigurace spinnerů}
Jakožto nejdůležitější bychom určitě označili relativní pozice všech spinnerů, které popíšeme pomocí jejich středů $S_1, S_2,...$ (každý střed je braný jako vektor ve spinnerové rovině) a jejich poloměrů $r_1, r_2, ...$.
Dále bude k přesnému určení pozicí magnetů nezbytné znát okamžité úhly rotace spinnerů, které ozačíme $\varphi_1, \varphi_2,...$.
Nakonec k popsání spinneru musíme určit počet ramen, neboli počet připevněných magnetů. Tento počet označíme $n$ a pro naše spinnery platí $n=3$.

Pomocí těchto údajů je triviální vyjádřit pozici $P(i)$ libovolného magnetu pomocí jeho indexu $i$ (kde $0 \leq i < n$):

\begin{equation}
    \label{eq:magnet_pos}
    P(i) = S + \biggr(r\cos{\bigg(\varphi + \frac{2\pi i}{n}\bigg)},
    r\sin{\bigg(\varphi+\frac{2\pi i}{n}}\bigg), 0 \bigg)
\end{equation}

\begin{wrapfigure}{r}{0.4\textwidth}
    \includegraphics[width=0.3\textwidth]{orientace_magnetu.png}
    \centering
    \caption{Tři námi vyhranění orientace magnetů}
    \label{fig:mag_orientations}
\end{wrapfigure}

Kromě pozice magnetu hraje také klíčovou roli nasměrování jeho pólů. Zde definujeme 3 důležité orientace pólů (viz Obr. \ref{fig:mag_orientations}):

\begin{enumerate}[topsep=0pt, partopsep=0pt]
    \setlength{\itemsep}{0pt}%
    \setlength{\parskip}{0pt}%
    \item \textbf{Vertikální (\textit{vertical})}
    \item Odstředivá (\textit{eccentric})
    \item Tečná (\textit{tangent})
\end{enumerate}

V našich experimentech jsme používali převážně vertikální konfiguraci, jelikož takto bylo uchycení magnetů nejjednodušší.
Magnety se totiž samy připevnily ke kovovému závaží v každém z ramen spinneru (viz Obr. \ref{fig:1spinner}), které je zde z důvodu zvýšení momentu setrvačnosti.

Tyto konfigurace jsme také schopni popsat a to opět jakožto funkci indexu magnetu.
Nejdříve vyjádříme směrový vektor $\vec{u}(i)$ pro $i$. magnet v každé konfiguraci:

\vspace{24pt}

\begin{table}[!ht]
    \captionsetup{justification=raggedright,singlelinecheck=off}
    \caption{Směrové vektory pro různé konfigurace}
    \label{tab:mag_dir_vec}

    \def\arraystretch{1.5}
    \begin{tabularx}{\textwidth}{p{0.50\textwidth} p{0.50\textwidth} }
        \textbf{Konfigurace} & \textbf{Směrový vektor magnetu}                    \\
        \hline
        Vertikální           & $\vec{u}(i) = (0,0,1)$                             \\
        Odstředivá           & $\vec{u}(i) = \widehat{P(i) - S}$                  \\
        Tečná                & $\vec{u}(i) = (0,0,1) \times \widehat{(P(i) - S)}$ \\
    \end{tabularx}
\end{table}

{\raggedright
Když nyní zvolíme velikost magnetického momentu našich magnetů $|\vec{m}_0|$, jsme schopni popsat magnetický moment včetně jeho velikosti \footnote{Všimněme si, že $u(i) = \hat{u}(i)$}:}

\begin{equation}
    \label{eq:magnet_moment_orientation}
    \vec{m} = |\vec{m}_0| \cdot \vec{u}(i)
\end{equation}

Velikost magentických momentů bude záviset na teplotě, velikosti a materiálových vlastnostech magnetů (např. jejich chemickém složení a kvalitě), ale to, jaká je pravá velikost magnetických momentů $|\vec{m}_0|$, je momentálně nepodstatné a určíme ji později (viz kap. \ref{sec:remanence_measurement}).

Posledním parametrem, který zmíníme, ale nebudeme se jím zabývat, je přitahování, či odpuzování magnetů.
V našem případě jsem se zaměřili převážně na systémy, kde se všechny magnety odpuzují.

\subsection{Parametry týkající se pohybu spinnerů}

Druhou, složitější, částí popisu našeho systému je jeho pohyb a chování v čase.
Zde se nevyhneme úhlovým rychlostem jednotlivých spinnerů, které budeme značit $\omega_1, \omega_2,...$.
Poté by nás přirozeně napadlo úhlové zrychlení $\alpha_1, \alpha_2, ...$, ale pro náš případ bude šikovnější využít toho, že $\tau = I\alpha$, kde $\tau$ značí moment síly a $I$ značí moment setrvačnosti\footnote{Někdy také značeno $J$} spinneru.
Moment setrvačnosti určíme později ve své vlastní kapitole (viz kap. \ref{sec:moment_of_inertia}).

Posledním parametrem, který zmíníme, je tření v ložiscích spinnerů a jiné odporové síly.
Těm se budeme do hloubky věnovat v kapitole \ref{chap:drag}.

\clearpage

\section{Modelování magnetů}
V průběhu našich experimentů používáme neodymové (NdFeB) magnety krychlového tvaru o hraně 5mm a jakosti N35. \footnote{Jakosti neodymových magnetů se pohybují od N35 do N55 \cite{magnet_grades}.}
Toto označení jakosti neodymových magnetů popisuje jejich chemické složení, tepelnou odolonost a hlavně sílu \cite{magnet_grades}, která je popsána pomocí tzv. remanentní magnetizace, neboli remanence.

Jelikož jsou magnety poměrně malé, můžeme je ve větších vzdálenostech aproximovat jakožto magnetické dipóly.
Zároveň existuje velmi elegantní způsob, jak vypočítat velikost magnetického dipólu z jeho remanence \cite{magnetic_torque}:

\begin{equation}
    \label{eq:mag_mom_remanence}
    |\vec{m}_0| = \frac{1}{\mu_0}|\vec{B}_r|V
\end{equation}

Tabulkové hodnoty pro remanenci NdFeB magnetů jsou sice známé, ale v našem případě budeme přesnou hodnotu $|\vec{B}_r|$ našich magnetů měřit později, v kapitole \ref{sec:remanence_measurement}.

\section{Popis magnetických interakcí}

Jelikož k popisu magnetů používáme idealizaci pomocí magnetických dipólů, můžeme popsat interakce mezi nimi pomocí následujících rovnic.
Hlavní interakce mezi dvěma magnetickými dipóly jsou:
\begin{enumerate}[topsep=0pt, partopsep=0pt]
    \setlength{\itemsep}{0pt}%
    \setlength{\parskip}{0pt}%

    \item Silové interakce \cite{magnetic_force} mezi dvěma momenty $\vec{m}_1$ a $\vec{m}_2$, které jsou od sebe vzdáleny $\vec{r}$ \footnote{$\vec{r} = P_1 - P_2$}:

    \begin{equation}
        \label{eq:F_m}
        \begin{split}
            F_m (r,m_1,m_2) = \frac{3\mu_0}{4\pi ||r||^5} 
            \bigg[
                (m_1\cdot r) m_2 +
                (m_2\cdot r) m_1 +
                (m_1\cdot m_2) r -
                \frac{5(m_1\cdot r)(m_2\cdot r)}{||r||^2} r
            \bigg] \\
        \end{split}
    \end{equation}

    \item Magnetické interakce, neboli působení momentu síly \cite{magnetic_torque} na $\vec{m}_2$ z důvodu vytvoření magnetické indukce $B(r, m_1)$ momentem $\vec{m}_1$ \cite{magnetic_force}:

    \begin{equation}
        \label{eq:B}
        \begin{split}
            B (r, m) = \frac{\mu_0}{4\pi}\frac{3 \hat{r}(\hat{r}\cdot m) - m}{|r|^3} \\
            \tau = m_2 \times B(r, m_1)
        \end{split}
    \end{equation}
\end{enumerate}

\chapter{Měření parametrů}
\label{chap:param}

\begin{wrapfigure}{r}{0.5\textwidth}
    \includegraphics[width=0.45\textwidth]{dims.png}
    \centering
    \caption{Ilustrace spinneru společně s vyznačenými rozměry}
    \label{fig:spinner_size}
\end{wrapfigure}

\section{Rozměry spinneru}
\label{sec:spinner_size}
K popsání spinneru nejdříve určíme jeho rozměry (viz Obr. \ref{fig:spinner_size}).
Nejdůležitější rozměr pro nás bude vzdálenost osy otáčení od místa, kde budou umístěny magnety.
To je v našem případě $r = 35.9(1)mm$. 

Vzhledem k tomu, že na sebe spinnery mohou vzájemně působit pouze magnetickými silami, jak je řečeno v zadání, není třeba řešit zbytek geometrie spinneru v budoucích modelech.
Spinner budeme dále modelovat pouze jako $n$ magnetických dipólů, které se otáčejí kolem středu $S$ a pevně si udržují své relativní pozice.
Tomuto celkovému systému definujeme moment setrvačnosti podle následujícího měření.
\section{Moment setrvačnosti}
\label{sec:moment_of_inertia}
{\raggedright
K určení momentu setrvačnosti spinneru bylo využito idealizace spinneru jakožto fyzického kyvadla, pro které platí: \cite{physical_pendulum}
}
\begin{equation}
    \label{eq:mag_pend}
    \omega = \sqrt{\frac{mgr}{I}}
\end{equation}
A po vyjádření z rovnice \ref{eq:mag_pend} tedy získáváme:
\begin{equation}
    \label{eq:mom_inert}
    I = \frac{mgr}{\omega^2} = \frac{mgr}{4\pi^2f^2}
\end{equation}
Nyní stačí změřit frekvenci kmitů zavěšeného spinneru s několika magnety na jednom z jeho ramen.

\begin{wrapfigure}{r}{0.5\textwidth}
    \includegraphics[width=0.45\textwidth]{mom_inert_setup.png}
    \centering
    \caption{Ilustrace aparatury pro měření frekvence kmitů spinneru}
    \label{fig:spinner_pendulum_aparature}
\end{wrapfigure}
\subsection{Aparatura}
Po připevnění šesti neodymových magnetů o jednotkové hmotnosti $0.92(1) g$ byl spinner připevněn pevně ve své ose otáčení.
Pod takto zavěšený spinner bylo umístěno Magnetické čidlo Vernier MG-BTA, které zaznamenávalo, jak blízko se magnety nacházejí.
Po umístění spinneru mimo rovnovážnou polohu byl ponechán oscilovat a záznam průběhu magnetické indukce v čase byl čidlem nasnímán (viz \ref{fig:spinner_pendulum_recording}).
\vspace{40pt}

{\raggedright
\subsection{Analýza měření a výsledky}
Průběh následně analyzujeme pomocí programovacího jazyka \texttt{Python} \cite{python} a knihovny \texttt{scipy} \cite{scipy}.
Námi kýžená maxima vyhledáme použitím funkce \texttt{scipy.signal.find\_peaks} a z jejich počtu jsme schopni určit počet period, kterými kyvadlo prošlo za určený čas.
}

\begin{wrapfigure}{r}{1\textwidth}
    \includegraphics[width=1\textwidth]{spin_pendulum_field_rec.png}
    \centering
    \caption[Nasnímaný průběh magnetické indukce v čase pro spinnerové kyvadlo]{Nasnímaný průběh magnetické indukce v čase (modře) pro spinnerové kyvadlo. Peaky, označující uplynutí jedné půlperiody, jsou vyznačeny červeně.}
    \label{fig:spinner_pendulum_recording}
\end{wrapfigure}

\clearpage

Máme-li tedy pole $p$\footnote{$|p|$ označuje počet prvků pole $p$; $p_{min}$ označuje čas prvního peaku; $p_{max}$ označuje čas prvního peaku} všech časů nalezených peaků, je výpočet frekvence následující:
\begin{equation}
    \label{eq:freq_from_peaks}
    f = \frac{ |p| - 1}{2(p_{max} - p_{min})} = 1.00(1)Hz
\end{equation}

Dalším dosazením do předchozí rovnice \ref{eq:mom_inert} získáváme výslednou hodnotu\footnote{Tato hodnota je srovnatelná s jinými zdroji dostupnými online (viz. \cite{spinner_mom_inert_external})}:
\begin{equation}
    \label{eq:mom_inert_results}
    I = 4.80(50) \cdot 10^{-5} kg \cdot m^2
\end{equation}

\subsection{Popis skriptu}

V níže připnutém ústřižku kódu \ref{code:1} nejdříve načteme použité knihovny: 
\texttt{numpy} \cite{numpy} pro provedení konvoluce, 
\texttt{matplotlib} pro vytvoření grafu \ref{fig:spinner_pendulum_recording} \cite{matplotlib} a nakonec
\texttt{scipy}, kde využijeme funkce \texttt{find\_peaks}, jak již bylo zmíněno.

Prvním krokem je načtení dat ze souboru \texttt{kyvadlo.csv} a jejich převedení z textového fomrátu do 2D pole pojmenovaného \texttt{data}.
Dále izolujeme data jednotlivých os do separátních proměnných \texttt{xdata}, \texttt{ydata}.

\texttt{ydata} vyhladíme, abychom se zbavili šumu a to pomocí konvoluce skrze funkci \texttt{numpy.convolve}.
Délku 1D konvoluční matice jsme zvolili $m = 15$ a konvoluční matice délky $m$ v našem případě vypadá obecně takto:

\begin{equation}
    \label{eq:conv_matrix_avg}
    M_{conv} = 
    \underbrace{
        \begin{pmatrix}
            \frac{1}{m} & \frac{1}{m} & ... & \frac{1}{m}
        \end{pmatrix}
    }_{m\text{ krát}}
\end{equation}

Tato konvoluční matice přesněji provádí aritmetický průměr $m$ za sebou jdoucích hodnot.

Nyní provedeme hledání peaků na vyhlazenách datech pomocí funkce \texttt{find\_peaks}, která akceptuje další dobrovolné argumenty:
\begin{enumerate}[topsep=0pt, partopsep=0pt]
    \setlength{\itemsep}{0pt}%
    \setlength{\parskip}{0pt}%
    \item height: určuje minimální absolutní velikost peaku
    \item threshold: minimální rozdíl dvou sousedních hodnot, aby bod mohl být peakem
    \item distance: minimální indeová vzdálensot dvou peaků
\end{enumerate}

Poté určíme časový interval, kde se peaky nacházejí (a přidáme na každou stranu 0.5 sekundy pro přehlednost grafu),
a vygrafujeme půdovní naměřená data (modře) společně s pozicemi peaků (červeně). Dále ozačíme osy.

Nakonec dopočítáme frekvenci kmitů kyvadla podle vzorce \ref{eq:freq_from_peaks} a vypíšeme ji.

\lstinputlisting[language=Python, caption=Kód k analyzování spinnerového kyvadla, label=code:1]{./prilohy/snippets/c1.py}

\section{Remanence $\vec{B}_r$}
\label{sec:remanence_measurement}

K určení remanence našich magnetů využijeme dvou různých metod. Jedna z nich bude založena na silové interakci magnetů a jedna na magnetem vytvořeném poli.

\subsection{Určení remanence přes magnetické pole}

Prvním způsobem, jak určit přesnou hodnotu remanentní magentizace našich magnetů, je měření magnetického pole pomocí magnetometru mobilního telefonu.
Aplikace \texttt{Phyphox} umožňuje čtení těchto dat, která následně analyzujeme.

Měření provedeme pro sloupce 2 a 3 magnetů, abychom oveřili, zda je náš způsob měření konsistentní.
Dále také měříme větší neodymový magnet, jehož parametry nám nejsou známé, a který budeme používat v některých budoucích experimentech.
Abychom odstranili pozadí tvořené magnetickým polem země, provedeme měření magnetického pole jednou a poté magnet otočíme.
K získání výsledku jednoduše odečteme rozdíl naměřených hodnot, což bude dvojnásobek velikosti magnetického pole tvořeného magnetem.
Je zřejmé, že tímto odstraníme z meření jiné, neměnné, zdroje magnetických polí.

Kromě provádění měření pro různé počty a velikosti magnetů, budeme také meřit pole v různých vzdálenostech od magnetu, abychom dále potvrdili, zda je měření a náš model konzistetní.
Celkem provedeme tedy měření 2 magnetů, 3 magnetů a velkého magnetu pro vzdálenosti 5 cm, 10 cm, 20 cm a 30 cm.

\subsubsection{Analýza měření}
Výstupem aplikace \texttt{Phyphox} jsou sobory typu \texttt{.csv}, neboli \textit{"Comma separated values"} \cite{csv}.
Toto je poměrně čitelný a přívětivý formát ukládání dat, která v \texttt{Pythonovém} skriptu načteme pomocí funkce \texttt{open}, stejně jako v kódu \ref{code:1}.
Jinak budeme používat tyto knihovny: 
\texttt{numpy}, 
\texttt{matplotlib} pro vytvoření grafu \ref{fig:mag_field_recording_2mag_10cm},
\texttt{scipy}, kde využijeme funkce \texttt{curve\_fit}, a 
\texttt{math} \cite{pymath}.
Poté ručně určíme názvy všech datových souborů a časov  é intervaly, na kterých jsou magnety orientovány k snímači a od snímače.

Po načtení dat vyjmeme pouze hodnoty ve dříve zmíněných intervalech a najdeme jejich průměrnou hodnotu a odchylky. 
Z rozdílu průměrných hodnot magnetického pole v obou otočeních magnetů určíme velikost magnetického pole generovaného pouze magnetem (očištěného od pozadí). 
Z odchylek také určíme celkovou odchylku výsledné hodnoty.

Následně pro každé měření vytvoříme graf (příkladem je Obr. \ref{fig:mag_field_recording_2mag_10cm}).

\lstinputlisting[language=Python, caption=Kód k určení průměrné hodnoty magnetického pole a odchylek, label=code:2]{./prilohy/snippets/c2.py}

\begin{wrapfigure}{c}{1\textwidth}
    \includegraphics[width=1\textwidth]{mag_field_measurement_2mag_10cm.png}
    \centering
    \caption[Nasnímaný průběh magnetické indukce v čase pro účely měření remanence]{Nasnímaný průběh magnetické indukce v čase (modře) pro určení remanence. Průměrné hodnoty horní orientace (zeleně čerchovaně) a dolní orientace (modře čerchovaně). Odpovídající odchylky jsou znázorněny tečkovaně. Výsledná hodnota magnetické indukce tohoto příkladu, tedy dvou magnetů ve vzdálenosti 10 cm, je: $B = 1.01(8) \cdot 10^{-5} T$}
    \label{fig:mag_field_recording_2mag_10cm}
\end{wrapfigure}

\clearpage

Po zanalyzování všech měření můžeme vytvořit graf závislosti $B$ na vzdálenosti (graf \ref{fig:B_in_dist}):

\begin{wrapfigure}{r}{0.5\textwidth}
    \includegraphics[width=0.45\textwidth]{B_field_in_distance.png}
    \centering
    \caption[Závislost magnetické indukce na vzdálenosti]{Závislost magnetické indukce na vzdálenosti. Sledujeme, že $B \propto r^{-3}$}
    \label{fig:B_in_dist}
\end{wrapfigure}

Pro určení $B_r$ z naměřených hodnot provedeme zjednodušení vzorce \ref{eq:B}, kdy nahradíme vektory pouze jejich velikostmi:

\begin{equation}
    \label{eq:B_reduced}
    |B| = \frac{{\mu}_0 |m|}{2\pi r^3}
\end{equation}

Zde si všímáme úměrnosti $B \propto r^{-3}$, kterou také sledujeme v našich naměřených datech.
Následným dosazením rovnice \ref{eq:mag_mom_remanence} a vyjádřením remanence získáváme:

\begin{equation}
    \label{eq:Br_from_B}
    |B_r| = \frac{2\pi r^3 |B|}{V}
\end{equation}

Pro každou naměřenou hodnotu $B$ dopočítáme odpovídající $B_r$ a výsledky zobrazíme v jednotném grafu \ref{fig:rem_final}.

\subsection{Určení remanence přes sílu}

Druhý způsob, kterým jsme schopni určit remanenci, je skrze přitahování (resp. odpuzování) jednoho magnetu k (resp. od) druhého magnetu. Posazením jednoho magnetu na váhu a sledováním změny měřené hmotnosti jsme z gravitačního zrychlení schopni dopočítat působící sílu druhého magnetu, který je umístěn v určité výšce. Zároveň první magnet podložíme lehkou, tlustou a nemagnetickou vrstvou (např. blokem polystyrenu), abychom zabránili interakci magnetu s kovovými částmi váhy.

\begin{wrapfigure}{r}{0.5\textwidth}
    \includegraphics[width=0.45\textwidth]{F_in_distance.png}
    \centering
    \caption[Závislost magnetické síly na vzdálenosti]{Závislost magnetické síly na vzdálenosti. Sledujeme, že $F \propto r^{-4}$}
    \label{fig:mag_force_in_dist}
\end{wrapfigure}

Výhodou této metody je, že jsme schopni přesněji měřit slabší magnety, jelikož je můžeme dát blíže. V předchozí kapitole jsme nebyli schopni přiblížit magnety dostatečně blízko ke snímači telefonu kvůli jeho rozměrům. 
Toto měření provádíme pouze pro 1 magnet, jelikož pro ten nám chybí výsledky z měření pomocí magnetického pole (ze dříve zmíněných důvodů). Výsledky můžeme vidět na grafu \ref{fig:mag_force_in_dist}.

\clearpage

Výpočet remanence provedeme podobně jako u rovnice \ref{eq:B_reduced} a to náhradou vektorů za jejich velikosti v rovnici \ref{eq:F_m}. Tím jsme ji schopni zjednodušit na následující podobu:

\begin{equation}
    \label{eq:F_reduced}
    |F| =  \frac{3 {\mu}_0}{2\pi r^4}|m|^2
\end{equation}

Po dosazení rovnice \ref{eq:mag_mom_remanence} a vyjádřením remanence získáváme:

\begin{equation}
    \label{eq:Br_from_F}
    B_r = \sqrt{\frac{2\pi {\mu}_0 r^4 F}{3 V^2}}
\end{equation}

Výsledné hodnoty $B_r$ zobrazíme v jednotném grafu \ref{fig:rem_final}.

\subsection{Výsledky}

Výsledky obou způsobů měření sjednotíme do grafu závislosti $B_r$ na vzdálenosti (graf \ref{fig:rem_final}).

\begin{wrapfigure}{r}{0.5\textwidth}
    \includegraphics[width=0.5\textwidth]{Final_remanence.png}
    \centering
    \caption[Souhrnný graf všech měření remanence]{Souhrnný graf všech měření remanence. Ve výpočtu výsledné hodnoty $B_r$ není započítávána remanence velkého magnetu, jelikož není součástí stejné várky magnetů a budeme s ním nakládat později jinak.}
    \label{fig:rem_final}
\end{wrapfigure}

Očekávali bychom, že se $B_r$ v závislosti na vzdálenosti nebude měnit, a pro každé měření určíme pomocí optimalizace fitu konstantní funkcí souhrnnou hodnotu. Výsledkem všech měření bude aritmetický průměr těchto souhrnných hodnot.

Výsledná hodnota remanence našich krychlových magnetů je \footnote{Námi naměřené hodnoty jsou srovnatelné s externími zdroji (viz. \cite{magnet_grades})}:
$$
B_r = 1.10(13) T
$$

a našeho velkého magnetu je:
$$
B_{r_{xl}} = 0.87(5)T
$$

Důvodem, proč je remanence většího magentu znatelně nižší, může být skutečnost, že takto velký magnet náš model není schopen popsat jako jediný magnetický dipól, nebo například jeho stáří.

\clearpage

\chapter{Tření}
\label{chap:drag}

O třecích jevech při otáčení spinneru jsme si byli schopni udělat představu při úvodním kvalitativním sledování.

%% literatura
\begin{thebibliography}{99}
    \bibitem{magnetic_force} YUNG, Kar W.; LANDECKER, Peter B. a VILLANI, Daniel D. An Analytic Solution for the Force Between Two Magnetic Dipoles. [Online]. \textit{Magnetic and Electrical Separation.} 1998, roč. 9, č. 1, s. 39-52. ISSN 1055-6915. Dostupné z: \url{https://doi.org/10.1155/1998/79537}. [cit. 2023-12-16].
    \bibitem{magnetic_torque} CULLITY, B. D. a GRAHAM, C. D. \textit{Introduction to magnetic materials.} Second edition. Hoboken: IEEE Press, [2009]. ISBN 978-0-471-47741-9.
    \bibitem{torque_def} SERWAY, Raymond A. a JEWETT, John W. Jr. \textit{Physics for scientists and engineers.} 6th ed. Belmont: Thomson-Brooks/Cole, 2004. ISBN 0-534-40842-7.
    % https://www.physicsforums.com/threads/modeling-a-permanent-magnetic-as-a-dipole.594949/#google_vignette
    % https://hal.science/hal-02905104/document
    \bibitem{magnet_dipole_approx} YE, Jianhe; ZHAN, Pengfei; ZENG, Jincheng; KUANG, Honglin; DENG, Yongfang et al. Concise magnetic force model for Halbach-type magnet arrays and its application in permanent magnetic guideway optimization. [Online.] \textit{Journal of Magnetism and Magnetic Materials.} 2023, roč. 587. ISSN 03048853. Dostupné z: \url{https://doi.org/10.1016/j.jmmm.2023.171301}. [cit. 2023-12-16].
    \bibitem{shorthand_error_notation} NATIONAL INSTITUTE OF STANDARDS AND TECHNOLOGY. \textit{Standard Uncertainty and Relative Standard Uncertainty} [online]. [cit. 2023-12-16]. Dostupné z: \url{https://physics.nist.gov/cgi-bin/cuu/Info/Constants/definitions.html}
    \bibitem{shorthand_error_notation_stack_exchange} Jasper. \textit{Shorthand error notation (with brackets) accros decimal point [duplicate]} [online]. [cit. 2023-12-16]. Dostupné z: \url{https://physics.stackexchange.com/questions/445141/shorthand-error-notation-with-brackets-accros-decimal-point}
    \bibitem{tmf_tasks} \textit{Turnaj mladých fyziků} [online]. [cit. 2023-12-16]. Dostupné z: \url{https://tmf.fzu.cz/tasks.php?y}
    \bibitem{magnet_grades} \textit{Neodymium Magnet Grades} [online]. [cit. 2023-12-16]. Dostupné z: \url{https://totalelement.com/blogs/about-neodymium-magnets/neodymium-rare-earth-magnet-grades}
    \bibitem{physical_pendulum} REICHL, Jaroslav a Martin VŠETIČKA. \textit{Fyzické kyvadlo} [online]. [cit. 2023-12-16]. Dostupné z: \url{http://fyzika.jreichl.com/main.article/view/206-fyzicke-kyvadlo}


    \bibitem{python} VAN ROSSUM, Guido, Drake VAN ROSSUM a L. FRED. \textit{Python 3 Reference Manual.} Scotts Valley, CA: CreateSpace, 2009. ISBN 1441412697.
    \bibitem{scipy} VIRTANEN, Pauli. SciPy 1.0: Fundamental Algorithms for Scientific Computing in Python. \textit{Nature Methods}. 2020(17), 261-272.
    \bibitem{numpy} HARRIS, Charles R. Array programming with NumPy. \textit{Nature.} 2020(585), 357–362.
    \bibitem{matplotlib} HUNTER, John D. Matplotlib: A 2D graphics environment. \textit{Computing in science \& engineering}. 2007, 9(3), 90-95.
    \bibitem{pymath} VAN ROSSUM, Guido. \textit{The Python Library Reference, release 3.8.2.} Python Software Foundation, 2020.
    \bibitem{phyphox} STAACKS, S; HÜTZ, S; HEINKE, H a STAMPFER, C. Advanced tools for smartphone-based experiments: phyphox. Online. \textit{Physics Education}. 2018, roč. 53, č. 4. ISSN 0031-9120. Dostupné z: \url{https://doi.org/10.1088/1361-6552/aac05e}. [cit. 2023-12-17].
    \bibitem{csv} SHAFRANOVICH, Yakov. Common format and MIME type for comma-separated values (CSV) files. \textit{RFC 4180, October}. 2005.
    
    \bibitem{spinner_mom_inert_external} ALLAIN, Rhett. Let’s Explore the Physics of Rotational Motion With a Fidget Spinner. \textit{WIRED} [online]. 2017, \textbf{2017}, 1-1 [cit. 2023-12-19]. Dostupné z: \url{https://www.wired.com/2017/05/physics-of-a-fidget-spinner/}
\end{thebibliography}

%% obrázky 
\listoffigures

%% tabulky
\listoftables

%% snippety
\lstlistoflistings

\chapter*{Přílohy}
\begin{enumerate}[topsep=0pt, partopsep=0pt]
    \setlength{\itemsep}{0pt}%
    \setlength{\parskip}{0pt}%
    \item \label{attachment_1} Videozáznam interakce nehybného a pomalého spinneru \dotfill \textbf{VID1}
    \item \label{attachment_2} Videozáznam interakce nehybného a rychláho spinneru \dotfill \textbf{VID2}
    \item \label{attachment_3} Videozáznam interakce 3 spinnerů \dotfill \textbf{VID3}
\end{enumerate}
\end{document}